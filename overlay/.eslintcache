[{"/home/nikita/dapplets/my-nifty-collection/overlay/src/index.tsx":"1","/home/nikita/dapplets/my-nifty-collection/overlay/src/App.tsx":"2","/home/nikita/dapplets/my-nifty-collection/overlay/src/dappletBridge.ts":"3"},{"size":267,"mtime":1618412586676,"results":"4","hashOfConfig":"5"},{"size":8646,"mtime":1618991847217,"results":"6","hashOfConfig":"5"},{"size":1938,"mtime":1618843286506,"results":"7","hashOfConfig":"5"},{"filePath":"8","messages":"9","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"10"},"1rhfgv8",{"filePath":"11","messages":"12","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"13"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"10"},"/home/nikita/dapplets/my-nifty-collection/overlay/src/index.tsx",[],["16","17"],"/home/nikita/dapplets/my-nifty-collection/overlay/src/App.tsx",["18","19","20","21"],"import React from 'react';\nimport { Header, Menu, Dropdown, Input, Card, Feed, Button } from 'semantic-ui-react';\nimport { bridge } from './dappletBridge';\n\nlet counter = 0;\n\ninterface Props {}\n\ninterface State {\n  user: string;\n  current: boolean;\n  nfts: {\n    name: string;\n    description: string;\n    image: string;\n    link: string;\n    issued_at: string;\n    program: string;\n    cohort: string;\n    owner: string;\n  }[];\n  searchQuery: string;\n  isConnected: boolean;\n  linkStateChanged: boolean;\n  currentNearAccount: string;\n  nearWalletLink: string;\n}\n\nconst defaultState = {\n  user: '',\n  current: true,\n  nfts: [\n    {\n      name: '',\n      description: '',\n      image: '',\n      link: '',\n      issued_at: '',\n      program: '',\n      cohort: '',\n      owner: '',\n    }\n  ],\n  searchQuery: '',\n  isConnected: true,\n  linkStateChanged: false,\n  currentNearAccount: '',\n  nearWalletLink: '',\n};\n\nexport default class App extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { ...defaultState };\n  }\n\n  async getData() {\n    const { current, user, nearWalletLink } = this.state;\n    const currentNearAccount = await bridge.getCurrentNearAccount();\n    const currentExternalAccounts = await bridge.getExternalAccounts(currentNearAccount);\n    if (current) {\n      if (!currentExternalAccounts.length) {\n        this.setState({\n          isConnected: false,\n          user,\n          current,\n          currentNearAccount,\n          nearWalletLink,\n        });\n      } else {\n        const nfts = await bridge.getNftsByNearAccount(currentNearAccount);\n        this.setState({\n          user,\n          nfts: nfts.length ? nfts : defaultState.nfts,\n          current,\n          currentNearAccount,\n        });\n      }\n    } else {\n      const nearAcc = await bridge.getNearAccounts(user);\n      const nfts = await bridge.getNftsByNearAccount(nearAcc[0]);\n      this.setState({ user, nfts, current });\n    }\n  }\n\n  componentDidMount() {\n    bridge.onData((data) => this.setState({ ...data }, () => this.getData()));\n  }\n\n  handleLink = async () => {\n    await bridge.addExternalAccount(this.state.user);\n    await this.setState({ isConnected: true, linkStateChanged: true });\n    await this.getData();\n    bridge.afterLinking();\n  };\n\n  handleUnlink = async () => {\n    await bridge.removeExternalAccount(this.state.user);\n    await this.setState({ isConnected: false, linkStateChanged: true });\n    bridge.afterLinking();\n  };\n\n  render() {\n    const { current, user, nfts, isConnected, searchQuery, currentNearAccount, linkStateChanged } = this.state;\n    return (\n      user && (\n        <div className=\"overlay-container\">\n          <Header as=\"h2\" style={{ display: 'inline-block', marginTop: '20px' }}>\n            {current ? 'My' : user} NFT Collection\n          </Header>\n          {current && isConnected && (\n            <div style={{ display: 'inline-block', float: 'right', marginTop: '10px' }}>\n              <Menu style={{ border: 'none', boxShadow: 'none' }}>\n                <Menu.Menu position='right'>\n                  <Dropdown\n                    item\n                    simple\n                    icon=\"ellipsis vertical\"\n                    style={{ fontSize: '1.2em' }}\n                    direction='right'\n                  >\n                    <Dropdown.Menu>\n                      <Dropdown.Item>\n                        Connected to{' '}\n                        <a href={this.state.nearWalletLink} target=\"_blank\">\n                          {currentNearAccount}\n                        </a>\n                      </Dropdown.Item>\n                      <Dropdown.Item onClick={this.handleUnlink}>\n                        Unlink account @{user}\n                      </Dropdown.Item>\n                    </Dropdown.Menu>\n                  </Dropdown>\n                </Menu.Menu>\n              </Menu>\n            </div>\n          )}\n          {!isConnected && current ? (\n            <Card style={{ width: 'auto' }}>\n              {linkStateChanged && (\n                <Card.Content style={{ color: 'forestgreen' }}>\n                  <p>\n                    Twitter account <b>@{user}</b> has been unlinked from <b>{currentNearAccount}</b>\n                  </p>\n                </Card.Content>\n              )}\n              <Card.Content>\n                <p>\n                  Dapplet connected to{' '}\n                  <a href={this.state.nearWalletLink} target=\"_blank\">\n                    {currentNearAccount}\n                  </a>\n                </p>\n                <p>Current twitter account - @{user}</p>\n                <Button primary onClick={this.handleLink}>\n                  Link\n                </Button>\n              </Card.Content>\n            </Card>\n          ) : (\n            <>\n              <Input\n                icon=\"search\"\n                placeholder=\"Search...\"\n                style={{ width: '-webkit-fill-available' }}\n                onChange={(e: any) => this.setState({ searchQuery: e.target.value })}\n                value={searchQuery}\n              />\n              <Card className=\"overlay-card\">\n                {linkStateChanged && current && (\n                  <Card.Content style={{ color: 'forestgreen' }}>\n                    <p>\n                      Twitter account <b>@{user}</b> has been linked to <b>{currentNearAccount}</b>\n                    </p>\n                  </Card.Content>\n                )}\n                {nfts[0].name === '' ? (\n                  <Card.Content description=\"You don't have NFTs yet.\" />\n                ) : (\n                  <Card.Content>\n                    <Feed>\n                      {nfts\n                        .reverse()\n                        .filter((nft) => {\n                          const reg = new RegExp(\n                            `${searchQuery.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')}`,\n                            'gi',\n                          );\n                          return reg.exec(nft.name)\n                            || reg.exec(nft.description)\n                            || reg.exec((new Date(nft.issued_at)).toLocaleDateString())\n                            || reg.exec(nft.program)\n                            || reg.exec(nft.cohort)\n                            || reg.exec(nft.owner);\n                        })\n                        .map((nft) => (\n                          <Feed.Event style={{ margin: '10px 0' }} key={counter++}>\n                            <Feed.Label image={nft.image} />\n                            <Feed.Content>\n                              <Feed.Summary>\n                                {nft.name}\n                              </Feed.Summary>\n                              <Feed.Summary style={{ fontWeight: 'normal' }}>\n                                <b>Description: </b>\n                                {nft.description}\n                              </Feed.Summary>\n                              <Feed.Summary style={{ fontWeight: 'normal' }}>\n                                <b>Link: </b>\n                                <a href={nft.link} target=\"_blank\">\n                                  view certificate\n                                </a>\n                              </Feed.Summary>\n                              <Feed.Summary style={{ fontWeight: 'normal' }}>\n                                <b>Issued at: </b>\n                                {(new Date(nft.issued_at)).toLocaleDateString()}\n                              </Feed.Summary>\n                              <Feed.Summary style={{ fontWeight: 'normal' }}>\n                                <b>Program: </b>\n                                {nft.program}\n                              </Feed.Summary>\n                              {nft.cohort && (\n                                <Feed.Summary style={{ fontWeight: 'normal' }}>\n                                  <b>Cohort: </b>\n                                  {nft.cohort}\n                                </Feed.Summary>\n                              )}\n                              <Feed.Summary style={{ fontWeight: 'normal' }}>\n                                <b>Owner: </b>\n                                {nft.owner}\n                              </Feed.Summary>\n                            </Feed.Content>\n                          </Feed.Event>\n                        ))}\n                    </Feed>\n                    <div className=\"nft_counter\">\n                      {nfts.length} NFTs\n                    </div>\n                  </Card.Content>\n                )}\n              </Card>\n            </>\n          )}\n        </div>\n      )\n    );\n  }\n}\n","/home/nikita/dapplets/my-nifty-collection/overlay/src/dappletBridge.ts",[],{"ruleId":"22","replacedBy":"23"},{"ruleId":"24","replacedBy":"25"},{"ruleId":"26","severity":1,"message":"27","line":125,"column":25,"nodeType":"28","endLine":125,"endColumn":77},{"ruleId":"26","severity":1,"message":"27","line":150,"column":19,"nodeType":"28","endLine":150,"endColumn":71},{"ruleId":"29","severity":1,"message":"30","line":186,"column":55,"nodeType":"31","messageId":"32","endLine":186,"endColumn":56,"suggestions":"33"},{"ruleId":"26","severity":1,"message":"27","line":209,"column":33,"nodeType":"28","endLine":209,"endColumn":68},"no-native-reassign",["34"],"no-negated-in-lhs",["35"],"react/jsx-no-target-blank","Using target=\"_blank\" without rel=\"noreferrer\" is a security risk: see https://html.spec.whatwg.org/multipage/links.html#link-type-noopener","JSXOpeningElement","no-useless-escape","Unnecessary escape character: \\/.","Literal","unnecessaryEscape",["36","37"],"no-global-assign","no-unsafe-negation",{"messageId":"38","fix":"39","desc":"40"},{"messageId":"41","fix":"42","desc":"43"},"removeEscape",{"range":"44","text":"45"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"46","text":"47"},"Replace the `\\` with `\\\\` to include the actual backslash character.",[5860,5861],"",[5860,5860],"\\"]